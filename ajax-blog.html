<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax Blog</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>
<body class="m-3 bg-light">
<h1 class="text-center my-3">Personal Blog</h1>
<hr>
<button type="button" onclick="refreshPage()" class="mb-3">Refresh blog here!</button>
<div id="posts">
</div>

<!--Ajax Blog-->
<!--Create a new html file called ajax-blog.html.-->
<!--At minimum, your ajax blog will need an empty <div> with an id of posts.-->
    <!--Add your own Bootstrap theme to this file as well. Feel free to use the same one as your store or choose a different one.-->
    <!--Download blog.json to your data directory from before.-->
    <!--Use ajax to load the contents of blog.json and add the data from it to your #posts div.-->
    <!--Add additional entries to blog.json and make sure your changes are reflected on the page.-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script>
    (function () {
        $.ajax("data/blog.json").done(function(data, status, jqXhr) {
            // alert("AJAX call completed successfully!");
            console.log("Request status: " + status);
            console.log("Data returned from server:");
            console.log(data);
            // list.push(data);
            var length = data.length-1;
            data.forEach(function(element, index){
                $("#posts").append("<div class='row border p-2'><p class='col-12 font-weight-bold'>" + data[length - index].date + "</p><h5 class='col font-italic'>" + data[length - index].title + "</h5><p class='col-12'>Categories: " + data[length - index].categories + "</p><p class='col-12'>" + data[length - index].content + "</p></div>");
                // $("#posts").append("<div class='row border p-2'><p class='col-12 font-weight-bold'>" + data[length - index].date + "</p></div>");

            });

        });
    })();

    function refreshPage(){
        $.ajax("data/blog.json").done(function(data, status, jqXhr) {
            // alert("AJAX call completed successfully!");
            console.log("Request status: " + status);
            console.log("Data returned from server:");
            console.log(data);
            // list.push(data);
            $("#posts").children().remove();
            var length = data.length-1;
            data.forEach(function(element, index){
                $("#posts").append("<div class='row border p-2'><p class='col-12 font-weight-bold'>" + data[length - index].date + "</p><h5 class='col font-italic'>" + data[length - index].title + "</h5><p class='col-12'>Categories: " + data[length - index].categories + "</p><p class='col-12'>" + data[length - index].content + "</p></div>");
            });

        });
    };
</script>



</body>
</html>